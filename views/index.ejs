<%- include("partials/header")%>

<div class="home-container">
  <h1 class="title">Blog Posts</h1>

  <% if(locals.posts && locals.posts.length > 0){ %>

  <div class="post-grid">
    <% posts.forEach(post => { %>
    <div class="blog-card">
      <h2 class="post-title"><%= post.blogTitle %></h2>
      <p class="post-date">
        <%= new Date(post.createdAt).toLocaleDateString('en-US', { year:
        'numeric', month: 'short', day: 'numeric' }) %>
      </p>
      <p class="post-content"><%= post.blogContent %></p>
      <div class="card-footer">
        <small class="authorName">By: <%= post.blogAuthor %></small>
        <div class="card-actions">
          <a href="/edit/<%= post._id %>" class="btn-icon edit">Edit</a>

          <a
            href="javascript:void(0)"
            class="btn-icon delete"
            onclick="deletePost('<%= post._id %>')"
          >
            Delete
          </a>
        </div>
      </div>
    </div>
    <%});%>
  </div>

  <% } else {%>
  <p class="no-post">
    No posts found. Go <a href="/compose" class="create-post">Create one</a>!
  </p>
  <% } %>
</div>

<%- include("partials/footer")%>
